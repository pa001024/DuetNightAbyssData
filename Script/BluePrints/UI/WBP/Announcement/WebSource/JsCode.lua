local JsCode = "// -*- coding: utf-8 -*-\n\nfunction setScrollbarWidth() {\n     // 使用ID避免重复创建样式\n    let styleSheet = document.getElementById('scrollbar-style');\n    if (!styleSheet) {\n        styleSheet = document.createElement('style');\n        styleSheet.id = 'scrollbar-style';\n        document.head.appendChild(styleSheet);\n    }\n    var width = document.documentElement.clientWidth / 160\n    styleSheet.type = 'text/css';\n    styleSheet.innerText = `\n            :hover::-webkit-scrollbar {\n                width: ${width}px;\n                height: ${width}px;\n                scroll-behavior: smooth;\n            }\n            :not(:hover)::-webkit-scrollbar{\n                width:0;\n                height:0;\n            }\n            ::-webkit-scrollbar:hover {\n                width: ${width}px;\n                height: ${width}px;\n                scroll-behavior: smooth;\n            }\n            :not(:hover)::-webkit-scrollbar:not(:hover){\n                width:0;\n                height:0;\n            }`;\n}\n\nfunction setAllHyperlink() {\n    var links = document.querySelectorAll('a');\n    for (var i = 0; i < links.length; i++) {\n        links[i].setAttribute('target', '_blank');\n        var href = links[i].getAttribute(\"href\")\n        if (href) {\n            links[i].addEventListener(\"click\",function(event){\n                if(window.ue) {\n                    window.ue.obj.onbeforepopup(href,\"\")\n                }\n            })\n        }\n    }\n}\n\nfunction makeFontface(){\n    const searchParams = new URLSearchParams(window.location.search)\n    var fontUrl = searchParams.get(\"fontUrl\")\n    console.log(fontUrl)\n    if(fontUrl == null) {return;}\n    var gameFont = new FontFace(\"GameFont\", `url(${fontUrl})`)\n    gameFont.display = \"block\"\n    gameFont.load().then(function(loadFace){\n        document.fonts.add(loadFace);\n    });\n}\n\nvar disableScroll = \"false\"\n\nwindow.onload = () => {\n    window.onresize = ()=>{\n        setScrollbarWidth()\n    }\n    document.body.style.opacity = 1;\n    const searchParams = new URLSearchParams(window.location.search)\n    disableScroll = searchParams.get(\"disableScroll\")\n    if(disableScroll == \"true\"){\n        document.body.style.overflowY = \"hidden\";\n    } else {\n        document.body.style.overflowY = \"auto\";\n    }\n    setScrollbarWidth()\n    setAllHyperlink()\n}\n\nvar scrollcount = 0;\nvar dragy;\nvar scrollarrowtop;\nfunction initdrag() {\n    if(disableScroll == \"true\"){\n        return;\n    }\n    scrollcount = 1;\n    dragy = event.clientY;\n}\n\nfunction startdrag() {\n    if(disableScroll == \"true\"){\n        return;\n    }\n    if (scrollcount == 1) {\n        window.scrollBy(0, dragy - event.clientY);\n        document.body.style.cursor = 'hand';\n        dragy = event.clientY;\n    }\n}\n\nfunction enddrag() {\n    if(disableScroll == \"true\"){\n        return;\n    }\n    document.body.style.cursor = '';\n    scrollcount = 0;\n}\ndocument.addEventListener(\"mouseout\",function(event){\n    if(event.relatedTarget == null){\n        enddrag();\n    }\n});\n\nmakeFontface()\n"
return JsCode
